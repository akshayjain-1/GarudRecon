[{
  "requirements": [
    { "bin": "gitrepoenum", "install": "gocl -i github.com/rix4uni/gitrepoenum" },
    { "bin": "unew", "install": "go install github.com/rix4uni/unew@latest" }
  ],
  "command": [
    "curl -s \"https://raw.githubusercontent.com/rix4uni/scope/refs/heads/main/data/GithubRepo/${INPUT}\" | awk '{ s=$0; sub(/^[A-Za-z][A-Za-z0-9+.-]*:\\/\\//, \"\", s); if (gsub(/\\//, \"\", s)==1) print $0 }' | unew -q ~/allgithubrepo/github.orgs",
    "curl -s \"https://raw.githubusercontent.com/rix4uni/scope/refs/heads/main/data/GithubRepo/${INPUT}\" | awk '{ s=$0; sub(/^[A-Za-z][A-Za-z0-9+.-]*:\\/\\//, \"\", s); if (gsub(/\\//, \"\", s)==2) print $0 }' | sed 's|$|.git|' | unew -q ~/allgithubrepo/github.repos",
    "echo \"Change LowerCase orgnames with actual UpperCase orgnames in ~/allgithubrepo/github.orgs waiting for 30 minutes\" && sleep 30m",
    "cat ~/allgithubrepo/github.orgs | gitrepoenum org --config ~/.config/gitrepoenum/config.yaml -t ~/.config/gitrepoenum/github-token.txt -c -o ~/allgithubrepo/output.json",
    "cat ~/allgithubrepo/output.json | jq -r '.repos[].html_url' | sed 's|$|.git|' | unew -q ~/allgithubrepo/github.repos",
    "cat ~/allgithubrepo/github.repos | gitrepoenum download --parallel 100 --depth 0 -o ~/allgithubrepo/download",
    "gitrepoenum commit -i ~/allgithubrepo/download -d all -o ~/allgithubrepo/commits",
    "gitrepoenum code -i ~/allgithubrepo/download -o ~/allgithubrepo/commits",
    "gitrepoenum vuln -i ~/allgithubrepo/commits -o ~/allgithubrepo/commits",
    "find ~/allgithubrepo/commits/ -type f -path \"*/vuln/*.txt\" -exec grep -l \"Found verified result\" {} + | unew -q ${OUTPUT}"
  ],
  "example": "garudrecon workflow mass-gitrepo -i inscope_github_repo.txt -o gitrepoenum.vuln",
  "description": "Scan all github repos with gitrepoenum and trufflehog"
}]
